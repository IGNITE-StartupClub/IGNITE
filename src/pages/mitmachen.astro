---
import DefaultLayout from '../layouts/DefaultLayout.astro';
import OpenPositions from '../components/OpenPositions.jsx';
import Questionnaire from '../components/Questionnaire.jsx';
import CallToAction from '../components/CallToAction.astro';

const initialPosition = Astro.url.searchParams.get('position') || '';
export const prerender = false;
---

<DefaultLayout>
  <main class="mitmachen-container">
    <h1>Mitmachen im IGNITE Startup Club Lüneburg</h1>
    <p class="intro">
      IGNITE Startup Club Lüneburg ist eine studentische Initiative für Startups und Unternehmertum. 
      Gemeinsam fördern wir Gründungsgeist, vernetzen Talente und setzen nachhaltige Projekte um.
    </p>

    <!-- 1) Offene Positionen -->
    <section aria-labelledby="open-positions">
      <h2 id="open-positions">Offene Positionen</h2>
      <OpenPositions />
    </section>

    <section id="application-form" class="form-section">
      <div class="text-wrapper">
      <h2>Jetzt bewerben!</h2>
      <p>Bewirb dich jetzt ganz einfach und schnell mit diesem Bewerbungsformular.</p>
    </div>
      <!-- Client-seitig laden, damit React initialPosition auswertet -->
      <Questionnaire client:load initialPosition={initialPosition} />
    </section>

    <CallToAction />

  </main>

  <style lang="css">
    .mitmachen-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
      font-family: var(--font-sans);
      color: var(--color-text);
    }
    .intro {
      margin-bottom: 2rem;
      line-height: 1.6;
    }
    h1, h2 { 
      color: var(--color-primary);
    }
    .form-section {
      margin-top: 3rem;
    }
    #application-form {
      margin: 2rem 0 2rem 0;
    }
    .text-wrapper {
      margin-bottom: 2rem;
    }
    /* CSS-Variablen im globalen Stylesheet definiert */
  </style>
</DefaultLayout>